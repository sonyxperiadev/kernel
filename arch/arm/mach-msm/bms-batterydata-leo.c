/* Copyright (c) 2011-2013, The Linux Foundation. All rights reserved.
 * Copyright (C) 2014 Sony Mobile Communications Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include <linux/batterydata-lib.h>

static struct single_row_lut fcc_temp = {
	.x		= {-10, 0, 25, 50, 65},
	.y		= {2820, 2900, 3140, 3170, 3150},
	.cols	= 5
};

static struct single_row_lut fcc_temp_lg = {
	.x		= {-10, 0, 25, 50, 65},
	.y		= {2774, 2790, 3090, 3110, 3095},
	.cols	= 5
};

static struct pc_temp_ocv_lut pc_temp_ocv = {
	.rows		= 29,
	.cols		= 5,
	.temp		= {-10, 0, 25, 50, 65},
	.percent	= {100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45,
					40, 35, 30, 25, 20, 15, 10, 9, 8, 7, 6,
					5, 4, 3, 2, 1, 0},
	.ocv		= {
				{4290, 4290, 4290, 4290, 4290},
				{4223, 4249, 4256, 4250, 4243},
				{4171, 4203, 4200, 4193, 4187},
				{4108, 4143, 4146, 4140, 4134},
				{4052, 4088, 4096, 4089, 4084},
				{4008, 4044, 4047, 4041, 4037},
				{3962, 3996, 4002, 3998, 3995},
				{3916, 3951, 3951, 3958, 3957},
				{3875, 3910, 3903, 3917, 3917},
				{3843, 3880, 3869, 3876, 3875},
				{3814, 3852, 3841, 3844, 3842},
				{3786, 3826, 3818, 3819, 3817},
				{3768, 3807, 3799, 3799, 3797},
				{3748, 3788, 3784, 3779, 3777},
				{3727, 3770, 3769, 3758, 3747},
				{3707, 3754, 3753, 3736, 3720},
				{3687, 3740, 3729, 3714, 3697},
				{3665, 3727, 3698, 3690, 3672},
				{3634, 3700, 3669, 3669, 3651},
				{3623, 3690, 3662, 3663, 3651},
				{3611, 3679, 3659, 3660, 3645},
				{3592, 3664, 3647, 3650, 3632},
				{3573, 3649, 3634, 3637, 3615},
				{3545, 3623, 3597, 3602, 3576},
				{3513, 3588, 3564, 3556, 3528},
				{3473, 3541, 3502, 3492, 3466},
				{3412, 3471, 3420, 3409, 3383},
				{3304, 3353, 3292, 3296, 3265},
				{3000, 3000, 3000, 3000, 3000},
	}
};

static struct pc_temp_ocv_lut pc_temp_ocv_lg = {
	.rows		= 29,
	.cols		= 5,
	.temp		= {-10, 0, 25, 50, 65},
	.percent	= {100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45,
					40, 35, 30, 25, 20, 15, 10, 9, 8, 7, 6,
					5, 4, 3, 2, 1, 0},
	.ocv		= {
				{4280, 4280, 4280, 4280, 4280},
				{4240, 4259, 4247, 4231, 4223},
				{4191, 4215, 4191, 4175, 4171},
				{4141, 4168, 4137, 4122, 4124},
				{4090, 4120, 4086, 4071, 4075},
				{4039, 4074, 4038, 4025, 4030},
				{3997, 4027, 3993, 3982, 3990},
				{3956, 3981, 3953, 3944, 3957},
				{3919, 3940, 3908, 3900, 3914},
				{3882, 3903, 3863, 3855, 3864},
				{3857, 3872, 3835, 3827, 3833},
				{3835, 3848, 3813, 3807, 3814},
				{3817, 3829, 3796, 3791, 3796},
				{3797, 3811, 3782, 3776, 3781},
				{3782, 3798, 3768, 3757, 3765},
				{3765, 3781, 3751, 3736, 3741},
				{3747, 3763, 3727, 3710, 3711},
				{3726, 3739, 3696, 3680, 3675},
				{3695, 3714, 3673, 3659, 3653},
				{3688, 3705, 3668, 3653, 3649},
				{3675, 3695, 3657, 3647, 3642},
				{3664, 3684, 3645, 3631, 3632},
				{3655, 3672, 3631, 3607, 3621},
				{3636, 3654, 3606, 3559, 3583},
				{3604, 3609, 3559, 3518, 3533},
				{3564, 3553, 3497, 3478, 3471},
				{3473, 3450, 3418, 3408, 3388},
				{3336, 3331, 3290, 3275, 3253},
				{3000, 3000, 3000, 3000, 3000},
	}
};

static struct sf_lut rbatt_sf = {
	.rows		= 29,
	.cols		= 5,
	/* row_entries are temperature */
	.row_entries	= {-10, 0, 25, 40, 65},
	.percent	= {100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45, 40,
					35, 30, 25, 20, 15, 10, 9, 8, 7, 6, 5,
					4, 3, 2, 1, 0},
	.sf		= {
				{414, 208, 105, 95, 94},
				{416, 208, 105, 95, 94},
				{418, 208, 105, 95, 94},
				{421, 208, 105, 96, 94},
				{423, 209, 105, 96, 94},
				{426, 209, 106, 96, 94},
				{429, 211, 106, 96, 95},
				{432, 213, 106, 96, 95},
				{435, 217, 106, 96, 95},
				{439, 222, 107, 96, 95},
				{443, 226, 108, 97, 96},
				{447, 233, 108, 97, 96},
				{452, 240, 109, 98, 97},
				{457, 247, 110, 98, 97},
				{464, 254, 111, 99, 97},
				{471, 256, 112, 99, 98},
				{480, 261, 112, 99, 98},
				{492, 268, 112, 99, 98},
				{509, 275, 113, 100, 98},
				{513, 281, 113, 100, 99},
				{518, 285, 114, 101, 99},
				{524, 289, 114, 101, 99},
				{530, 292, 114, 101, 99},
				{538, 296, 115, 101, 100},
				{547, 301, 116, 102, 100},
				{559, 310, 119, 103, 101},
				{575, 329, 121, 103, 101},
				{604, 345, 124, 105, 103},
				{724, 401, 172, 198, 111},
	}
};

static struct sf_lut rbatt_sf_lg = {
	.rows		= 29,
	.cols		= 5,
	/* row_entries are temperature */
	.row_entries	= {-10, 0, 25, 40, 65},
	.percent	= {100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45, 40,
					35, 30, 25, 20, 15, 10, 9, 8, 7, 6, 5,
					4, 3, 2, 1, 0},
	.sf		= {
				{605, 318, 119, 107, 104},
				{605, 318, 119, 108, 104},
				{605, 318, 120, 108, 105},
				{605, 319, 120, 108, 105},
				{605, 321, 121, 108, 105},
				{606, 326, 122, 109, 106},
				{609, 332, 122, 109, 106},
				{613, 341, 123, 109, 106},
				{620, 351, 124, 110, 106},
				{628, 364, 125, 110, 106},
				{639, 378, 126, 111, 106},
				{651, 394, 127, 111, 106},
				{666, 413, 129, 112, 106},
				{682, 433, 131, 113, 107},
				{700, 455, 136, 114, 107},
				{721, 479, 141, 116, 107},
				{743, 505, 145, 118, 108},
				{767, 533, 149, 117, 108},
				{793, 564, 157, 120, 110},
				{799, 570, 159, 121, 110},
				{804, 576, 160, 122, 110},
				{810, 583, 162, 123, 110},
				{815, 589, 166, 125, 111},
				{821, 596, 171, 126, 112},
				{827, 602, 176, 127, 113},
				{833, 609, 182, 129, 114},
				{839, 616, 191, 132, 116},
				{845, 623, 203, 137, 119},
				{851, 630, 228, 173, 128},
	}
};

struct bms_battery_data oem_batt_data_somc[BATT_VENDOR_NUM] = {
	/* BATT_VENDOR_TDK */
	{
	},
	/* BATT_VENDOR_SEND */
	{
		.fcc			= 3140,
		.fcc_temp_lut		= &fcc_temp,
		.pc_temp_ocv_lut	= &pc_temp_ocv,
		.rbatt_sf_lut		= &rbatt_sf,
		.default_rbatt_mohm	= 100,
		.flat_ocv_threshold_uv	= 3800000,
		.r_sense_uohm		= 10000,
		.ocv_high_threshold_uv	= 3810000,
		.ocv_low_threshold_uv	= 3740000,
	},
	/* BATT_VENDOR_SANYO */
	{
	},
	/* BATT_VENDOR_LG */
	{
		.fcc			= 3090,
		.fcc_temp_lut		= &fcc_temp_lg,
		.pc_temp_ocv_lut	= &pc_temp_ocv_lg,
		.rbatt_sf_lut		= &rbatt_sf_lg,
		.default_rbatt_mohm	= 100,
		.flat_ocv_threshold_uv	= 3800000,
		.r_sense_uohm		= 10000,
		.ocv_high_threshold_uv	= 3810000,
		.ocv_low_threshold_uv	= 3740000,
	},
	/* BATT_VENDOR_5TH */
	{
	},
};

struct bms_battery_data *bms_batt_data = &oem_batt_data_somc[0];
int bms_batt_data_num = BATT_VENDOR_NUM;
